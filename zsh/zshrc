# Enable Powerlevel10k instant prompt. Should stay close to the top of ~/.zshrc.
# Initialization code that may require console input (password prompts, [y/n]
# confirmations, etc.) must go above this block; everything else may go below.
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

source ~/.zplug/init.zsh

# antigen bundle bundler
zplug "plugins/command-not-found", from:oh-my-zsh
zplug "plugins/rake-fast", from:oh-my-zsh
# antigen bundle colored-man
# antigen bundle extract
# antigen bundle jump
zplug "plugins/gem", from:oh-my-zsh
# antigen bundle gitfast
# antigen bundle mvn
# antigen bundle rvm
# antigen bundle sudo
# antigen bundle systemd
zplug "plugins/redis-cli", from:oh-my-zsh
zplug "zsh-users/zsh-syntax-highlighting"
zplug "Tarrasch/zsh-functional"
zplug "plugins/mix", from:oh-my-zsh
zplug "romkatv/powerlevel10k", as:theme, depth:1

# Then, source plugins and add commands to $PATH
zplug load # --verbose

source ~/.zsh/exports.zsh
source ~/.zsh/keybindings.zsh
source ~/.zsh/aliases.zsh
source ~/.zsh/functions.zsh
source ~/.zsh/promptleft.zsh
source ~/.zsh/promptright.zsh
source ~/.zsh/history.zsh
source ~/.zsh/completion.zsh
source ~/.zsh/directories.zsh

# This one is not committed to dotfiles repository.
# There I keep secret env variables.
if [[ -a ~/.zsh/secrets.zsh ]]; then
	source ~/.zsh/secrets.zsh
fi

# source ~/.zsh/completions/tmuxinator.zsh
# source ~/.zsh/completions/zeus.zsh

# zmodload zsh/mathfunc
autoload zmv

autoload -U add-zsh-hook
function switch_term_colors() {
  ~/.bin/switch-colors auto
}
if (( $+commands[konsoleprofile] ))
then
	add-zsh-hook precmd switch_term_colors
fi

# Auto cd in directories
setopt autocd

# Extended Globbing, for example: `cp ^*.(tar|bz2|gz)`
setopt extendedglob

ZSH_HIGHLIGHT_HIGHLIGHTERS=(main brackets pattern cursor root)
# ZSH_HIGHLIGHT_STYLES[path]='fg=green,bold'
# ZSH_HIGHLIGHT_STYLES[globbing]='fg=magenta,bold'

# RVM
[[ (-s $HOME/.rvm) ]] && source $HOME/.rvm/scripts/rvm

# Opam
. /home/swistak35/.opam/opam-init/init.zsh > /dev/null 2> /dev/null || true

# rbenv
eval "$(rbenv init -)"

# nix
if [[ -a /home/swistak35/.nix-profile/etc/profile.d/nix.sh ]]
then
	# export LOCALE_ARCHIVE=/home/swistak35/locale-archive
	export LOCALE_ARCHIVE=/nix/store/4yhkx5xr14q3phjdqds3rhckrw4107xx-glibc-locales-2.21/lib/locale/locale-archive
	. /home/swistak35/.nix-profile/etc/profile.d/nix.sh
fi


[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

# Add RVM to PATH for scripting. Make sure this is the last PATH variable change.
# export PATH="$PATH:$HOME/.rvm/bin"

export PATH="$HOME/.yarn/bin:$HOME/.config/yarn/global/node_modules/.bin:$PATH"

# To customize prompt, run `p10k configure` or edit ~/.p10k.zsh.
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh
